$sql="SELECT Userinfo.UserId,Userinfo.Consecutivo,Userinfo.Name, $tabla.CheckTime, CONVERT(DATE,$tabla.CheckTime) AS Fecha, (CONVERT(TIME,$tabla.CheckTime)) AS Hora, $tabla.CheckTime as llegada, TbTurnos.Entra, TbDias.NomDia, (DATEDIFF(ss,CONVERT(TIME,TbTurnos.Entra), CONVERT(TIME,$tabla.CheckTime))/-60) AS Retardo FROM Userinfo INNER JOIN (TbTurnos INNER JOIN (TbJornadaTurno INNER JOIN (TbDias INNER JOIN ($tabla INNER JOIN TbDiaJornadaTurno ON $tabla.IdDjT = TbDiaJornadaTurno.IdDjT) ON TbDias.IdDia = TbDiaJornadaTurno.IdDia) ON TbJornadaTurno.IdJt = TbDiaJornadaTurno.IdJt) ON TbTurnos.Idturno = TbJornadaTurno.Idturno) ON Userinfo.Userid = $tabla.Userid WHERE $tabla.CheckType='E' AND (DATEDIFF(ss,CONVERT(TIME,TbTurnos.Entra), CONVERT(TIME,$tabla.CheckTime))) > 60 AND Userinfo.Name<>'0' ";

$sql="SELECT Userinfo.UserId,Userinfo.Consecutivo,Userinfo.Name, $tabla.CheckTime, INT($tabla.CheckTime) AS Fecha, ( $tabla.CheckTime-INT($tabla.CheckTime) ) AS Hora, $tabla.CheckTime as llegada, TbTurnos.Entra, TbDias.NomDia, (( $tabla.CheckTime-INT($tabla.CheckTime) )- TbTurnos.Entra) AS Retardo FROM Userinfo INNER JOIN (TbTurnos INNER JOIN (TbJornadaTurno INNER JOIN (TbDias INNER JOIN ($tabla INNER JOIN TbDiaJornadaTurno ON $tabla.IdDjT = TbDiaJornadaTurno.IdDjT) ON TbDias.IdDia = TbDiaJornadaTurno.IdDia) ON TbJornadaTurno.IdJt = TbDiaJornadaTurno.IdJt) ON TbTurnos.Idturno = TbJornadaTurno.Idturno) ON Userinfo.Userid = $tabla.Userid WHERE $tabla.CheckType='E' AND ((($tabla.CheckTime-INT($tabla.CheckTime))- TbTurnos.Entra))>0.00417 AND Userinfo.Name<>'0' ";